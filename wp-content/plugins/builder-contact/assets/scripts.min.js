(($,r)=>{'use strict';r.on('builder_load_module_partial',(e,t,a)=>{if(!0!==a||e[0].classList.contains('module-contact')){const d=r.selectWithParent('builder-contact',e);for(let e=d.length-1;-1<e;--e)r.requestIdleCallback(()=>{{var t=d[e];const s=t=>{const e=new FormData(t[0]);e.append("action","builder_contact_send"),e.append('post_id',t.data('post-id')),e.append('orig_id',t.data('orig-id')),e.append('element_id',t.data('element-id')),0<t.find('[name="g-recaptcha-response"]').length&&e.append("contact-recaptcha",t.find('[name="g-recaptcha-response"]').val()),$.ajax({url:t.prop('action'),method:'POST',enctype:'multipart/form-data',processData:!1,contentType:!1,cache:!1,data:e,success(e){t.removeClass('sending'),e.success?(t.find('.contact-message').html('<p class="ui light-green contact-success">'+e.data.msg+'</p>').fadeIn(),r.body.trigger('builder_contact_message_sent',[t,e.data.msg]),''!==e.data.redirect_url&&(window.location=e.data.redirect_url),t[0].reset()):(t.find('.contact-message').html('<p class="ui red contact-error">'+e.data.error+'</p>').fadeIn(),r.body.trigger('builder_contact_message_failed',[t,e.data.error])),$('html').stop().animate({scrollTop:t.offset().top-100},500,'swing'),'object'==typeof grecaptcha&&'v2'===t.find('.themify_captcha_field').data('ver')&&grecaptcha.reset()}})},a=c=>{r.is_builder_active||c.addEventListener('submit',function(e){e.preventDefault();const t=$(this);if(t.hasClass('sending'))return!1;t.addClass('sending').find('.contact-message').fadeOut();const a=c.getElementsByClassName('themify_captcha_field')[0];void 0!==a&&'v3'===a.dataset.ver&&'undefined'!=typeof grecaptcha?grecaptcha.ready(()=>{grecaptcha.execute(a.dataset.sitekey,{action:'captcha'}).then(e=>{t.prepend('<input type="hidden" name="g-recaptcha-response" value="'+e+'">'),s(t)})}):s(t)})},c=t.getElementsByClassName('themify_captcha_field')[0];if(c&&'undefined'==typeof grecaptcha){const n=c.getAttribute('data-sitekey');if(n){let e='https://www.google.com/recaptcha/api.js';'v3'===c.getAttribute('data-ver')&&(e+='?render='+n),r.LoadAsync(e,()=>{a(t)},!1,!0,()=>'undefined'!=typeof grecaptcha)}}else a(t)}},300)}})})(jQuery,Themify);